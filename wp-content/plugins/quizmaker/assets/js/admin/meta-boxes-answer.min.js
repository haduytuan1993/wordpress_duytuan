jQuery(function(e){e(".meta-type-box").appendTo("#quizmaker-answers-data .hndle span"),e(function(){e("#quizmaker-answers-data").find(".hndle").unbind("click.postboxes"),jQuery("#quizmaker-answers-data").on("click",".hndle",function(a){e(a.target).filter("input, option, label, select").length||e("#quizmaker-answers-data").toggleClass("closed")})}),e("select#answer-type").change(function(){var a=e(this).val();e(".answer-type-panel").hide(),e("#answer-type-"+a).show()}).change();var a={answer_media_image:function(a){a=e.extend({is_remove:!1},a);var t=this;a.is_remove?(a.container.find("img").remove(),e("input[name='"+a.name+"']").val("")):QM().WPMedia({selection:function(n){a=e.extend({size:"thumbnail"},a);var r=a.container.find("img");r.length>0?r.attr("src",n.sizes[a.size].url):(r=e("<img/>"),r.attr("src",n.sizes[a.size].url),removeElement=e('<span class="qm-answer-remove-image"><i class="material-icons">cancel</i></span>'),removeElement.click(function(n){n.preventDefault(),t.answer_media_image({is_remove:!0,container:a.container}),e(this).remove()}),a.container.append(r),a.container.before(removeElement)),e("input[name='"+a.name+"']").val(n.id)}})},single_template:function(a){void 0===a&&(a=0);var t=this,n=e('<tr><td class="qm-td-c-a"><input type="radio" value="'+a+'" class="ir-is-correct" name="answers_single_is-correct"/></td><td><div class="qm-answer-info"><span class="qm-answer-image" data-name="answers_single['+a+'][image]"><input type="hidden" name="answers_single['+a+'][image]"/></span></div><div class="qm-answer-desc"><textarea name="answers_single['+a+'][content]" class="qm-s-wide qm-answer-desc__editor"></textarea></div></td><td class="qm-td-c-a"><button class="qm-remove"><i class="material-icons">cancel</i></button></td></tr>');return n.find(".qm-remove").click(function(e){n.remove(),e.preventDefault()}),n.find(".qm-answer-image").click(function(a){t.answer_media_image({name:e(this).data("name"),container:e(this)}),a.preventDefault()}),n},multiple_template:function(a){void 0===a&&(a=0);var t=this,n=e('<tr><td class="qm-td-c-a"><input type="checkbox" value="'+a+'" class="ir-is-correct" name="answers_multiple_is-correct[]"/></td><td><div class="qm-answer-info"><span class="qm-answer-image" data-name="answers_multiple['+a+'][image]"><input type="hidden" name="answers_multiple['+a+'][image]"/></span></div><div class="qm-answer-desc"><textarea name="answers_multiple['+a+'][content]" class="qm-s-wide qm-answer-desc__editor"></textarea></div></td><td class="qm-td-c-a"><button class="qm-remove"><i class="material-icons">cancel</i></button></td></tr>');return n.find(".qm-remove").click(function(e){n.remove(),e.preventDefault()}),n.find(".qm-answer-image").click(function(a){t.answer_media_image({name:e(this).data("name"),container:e(this)}),a.preventDefault()}),n},drag_match_template:function(a){void 0===a&&(a=0);var t=e('<tr><td><textarea name="answers_drag_match['+a+'][content]" class="qm-s-wide"></textarea><div class="qm-group-input-label"><label class="center">Answer</label><div class="g-input"><input type="text" name="answers_drag_match['+a+'][answer]"/></div></div></td><td class="qm-td-c-a"><button class="qm-remove"><i class="material-icons">cancel</i></button></td></tr>');return t.find(".qm-remove").click(function(e){t.remove(),e.preventDefault()}),t},group_match_template:function(a){void 0===a&&(a=0);var t=e('<tr><td><div class="qm-group-input-label"><label class="center">Group</label><div class="g-input"><input type="text" name="answers_group_match['+a+'][group]"/></div></div><div class="qm-group-input-label"><label class="center">Answer</label><div class="g-input"><input type="text" name="answers_group_match['+a+'][item]"/></div></div></td><td class="qm-td-c-a"><button class="qm-remove"><i class="material-icons">cancel</i></button></td></tr>');return t.find(".qm-remove").click(function(e){t.remove(),e.preventDefault()}),t},order_template:function(a){void 0===a&&(a=0);var t=this,n=e('<tr><td class="qm-td-c-a"><span class="answers_order-drag">Drag</span></td><td><div class="qm-answer-info"><span class="qm-answer-image" data-name="answers_order['+a+'][image]"><input type="hidden" name="answers_order['+a+'][image]"/></span></div><div class="qm-answer-desc"><textarea name="answers_order['+a+'][content]" class="qm-s-wide"></textarea></div></td><td class="qm-td-c-a"><button class="qm-remove"><i class="material-icons">cancel</i></button></td></tr>');return n.find(".qm-remove").click(function(e){n.remove(),e.preventDefault()}),n.find(".qm-answer-image").click(function(a){t.answer_media_image({name:e(this).data("name"),container:e(this)}),a.preventDefault()}),n},guess_word_template:function(a){void 0===a&&(a=0);var t=e('<tr><td class="qm-td-c-a"><input type="checkbox" value="'+a+'" class="ir-is-correct" name="answers_guess_word_is-correct[]"/></td><td><div class="qm-answer-desc no-pad"><input name="answers_guess_word['+a+'][content]" class="qm-s-wide"/></div></td><td class="qm-td-c-a"><button class="qm-remove"><i class="material-icons">cancel</i></button></td></tr>');return t.find(".qm-remove").click(function(e){t.remove(),e.preventDefault()}),t},keywords_template:function(a){void 0===a&&(a=0);var t=e('<tr><td><div class="qm-answer-desc no-pad"><input name="answers_keywords['+a+'][content]" class="qm-s-wide"/></div></td><td class="qm-td-c-a"><button class="qm-remove"><i class="material-icons">cancel</i></button></td></tr>');return t.find(".qm-remove").click(function(e){t.remove(),e.preventDefault()}),t}};e("#add-new-single-answer").click(function(t){var n=e("#answer-type-single .answers-box tbody");a.single_template(n.children("tr").length).appendTo(n),tinymce.init({selector:"textarea.qm-answer-desc__editor",theme:"modern",height:200,menubar:!1,toolbar:"bold italic underline strikethrough forecolor backcolor superscript subscript | alignleft aligncenter alignright | image media",insert_toolbar:"quickimage",plugins:"tabfocus,paste,media,wordpress,wpeditimage,wpgallery,wpdialogs,textcolor"}),t.preventDefault()}),e("#add-new-multiple-answer").click(function(t){var n=e("#answer-type-multiple .answers-box tbody");a.multiple_template(n.children("tr").length).appendTo(n),tinymce.init({selector:"textarea.qm-answer-desc__editor",theme:"modern",height:200,menubar:!1,toolbar:"bold italic underline strikethrough forecolor backcolor superscript subscript | alignleft aligncenter alignright | image media",insert_toolbar:"quickimage",plugins:"tabfocus,paste,media,wordpress,wpeditimage,wpgallery,wpdialogs,textcolor"}),t.preventDefault()}),e("#add-new-drag-match").click(function(t){var n=e("#answer-type-drag_match .answers-box tbody");a.drag_match_template(n.children("tr").length).appendTo(n),t.preventDefault()}),e("#add-new-group-match").click(function(t){var n=e("#answer-type-group_match .answers-box tbody");a.group_match_template(n.children("tr").length).appendTo(n),t.preventDefault()}),e("#add-new-order").click(function(t){var n=e("#answer-type-order .answers-box tbody");a.order_template(n.children("tr").length).appendTo(n),t.preventDefault()}),e("#add-new-guess-word-answer").click(function(t){var n=e("#answer-type-guess_word .answers-box tbody");a.guess_word_template(n.children("tr").length).appendTo(n),t.preventDefault()}),e("#add-new-keywords-answer").click(function(t){var n=e("#answer-type-keywords .answers-box tbody");a.keywords_template(n.children("tr").length).appendTo(n),t.preventDefault()}),e(".answer-type-panel .qm-remove").click(function(a){e(this).parents("tr").remove(),a.preventDefault()}),e(".answer-type-panel .qm-answer-image").click(function(t){a.answer_media_image({name:e(this).data("name"),container:e(this)}),t.preventDefault()}),e(".answer-type-panel .qm-answer-remove-image").click(function(t){var n=e(this).next(".qm-answer-image"),r=n.data("name");a.answer_media_image({is_remove:!0,container:n,name:r}),e(this).remove(),t.preventDefault()}),tinymce.init({selector:"textarea.qm-answer-desc__editor",theme:"modern",height:200,menubar:!1,toolbar:"bold italic underline strikethrough forecolor backcolor superscript subscript | alignleft aligncenter alignright | image media",insert_toolbar:"quickimage",plugins:"tabfocus,paste,media,wordpress,wpeditimage,wpgallery,wpdialogs,textcolor"}),e(".answer-type-panel .answers-box.order tbody").sortable({items:"> tr"})});