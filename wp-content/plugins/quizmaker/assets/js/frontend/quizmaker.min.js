function aws_inherit(e){function t(){}return t.prototype=e,new t}jQuery(function(e){QM_Question={enable:!0,init:function(){this.explanation=this._explanation()},get_container:function(){return this.container},get_id:function(){return parseInt(this.container.data("id"))},get_answer:function(){return{id:this.get_id(),value:this.get_value(),type:this.type}},_explanation:function(){var t=this,n={init:function(){var n=this;this.container=t.container.find(".explanation"),this.button=t.container.find(".info_explanation"),this.button.click(function(){e(this).hasClass("active")?e(this).removeClass("active"):e(this).addClass("active"),n.toggle()})},toggle:function(){this.container.hasClass("s")?this.hide():this.show()},show:function(){this.container.removeClass("h").addClass("s")},hide:function(){this.container.removeClass("s").addClass("h")}};return n.init(),n},disable:function(){this.enable=!1}},QM_Question_Single=function(t){var n=function(t){var n=this;this.type="single",this.container=t;var i=t.find("input");({init:function(){this._events(),n.init()},_events:function(){i.change(function(){if(!n.enable)return!1;var e={question:t,complete:!1,type:"single"};n.is_complete()&&(e.complete=!0,e.value=n.get_value()),t.trigger("_qm_engine_question_change",e)});var a=t.find(".group-box-radio");a.click(function(t){if(!n.enable)return!1;a.removeClass("checked"),e(this).addClass("checked")})}}).init(),this.get_value=function(){var e=i.filter(":checked").val();if(void 0!==e)return parseInt(e)},this.is_complete=function(){return void 0!==this.get_value()},this.show_anwers=function(n){this.disable();var i=t.find(".group-box-radio.checked");1==n.is_correct?i.addClass("ans_right"):(i.addClass("ans_wrong"),t.find(".group-box-radio").each(function(){var t=e(this),i=e(this).data("value");e.each(n.answer,function(e,n){i==e&&1==n.is_correct&&t.addClass("ans_right")})}))}};return n.prototype=QM_Question,new n(t)},QM_Question_Multiple=function(t){var n=function(t){var n=this;this.type="multiple",this.container=t;var i=t.find(".checkbox_input");({init:function(){this._events(),n.init()},_events:function(){i.change(function(){if(!n.enable)return!1;var e={question:t,complete:!1,type:"multiple"};n.is_complete()&&(e.complete=!0,e.value=n.get_value()),t.trigger("_qm_engine_question_change",e)}),t.find(".group-box-checkbox").click(function(t){if(!n.enable)return!1;e(this).hasClass("checked")?e(this).removeClass("checked"):e(this).addClass("checked")})}}).init(),this.get_value=function(){var t=[];if(i.each(function(){e(this).is(":checked")&&t.push(e(this).val())}),t.length>0)return t},this.is_complete=function(){return!!this.get_value()},this.show_anwers=function(n){this.disable();var i=t.find(".group-box-checkbox.checked");1==n.is_correct?i.addClass("ans_right"):(i.addClass("ans_wrong"),t.find(".group-box-checkbox").each(function(){var t=e(this),i=e(this).data("value");e.each(n.answer,function(e,n){i==e&&1==n.is_correct&&t.addClass("ans_right")})}))}};return n.prototype=QM_Question,new n(t)},QM_Question_Fillblank=function(t){var n=function(t){var n=this;this.type="fill_blank",this.container=t;var i=t.find("textarea");({init:function(){this._events(),n.init()},_events:function(){i.change(function(){if(!n.enable)return!1;var e={question:t,complete:!1,type:"fill_blank"};n.is_complete()&&(e.complete=!0,e.value=n.get_value()),t.trigger("_qm_engine_question_change",e)})}}).init(),this.get_value=function(){return i.val()},this.is_complete=function(){return!!this.get_value()},this.disable=function(){this.enable=!1,t.find("textarea").attr("disabled",!0)},this.show_anwers=function(n){this.disable();var i=t.find(".group-box-fill-blank");if(1==n.is_correct)i.addClass("ans_right");else{var a=e('<div class="result"></div>');a.html(n.answer),i.addClass("ans_wrong"),i.append(a)}}};return n.prototype=QM_Question,new n(t)},QM_Question_Order=function(t){var n=function(t){var n=this,i=!1;this.type="order",this.container=t;var a=t.find(".group-order"),s="y";a.hasClass("style-line")&&(s="x"),{init:function(){this.inputs=t.find(".group-order"),this._events(),n.init()},_events:function(){this.inputs.sortable({items:"> li",placeholder:"ui-sortable-placeholder",axis:s,create:function(e,t){},change:function(e,a){var s={question:t,complete:!1,type:"order"};n.is_complete()&&(s.complete=!0,s.value=n.get_value()),i=!0,t.trigger("_qm_engine_question_change",s)}})}}.init(),this.get_value=function(){return!!i&&t.find(".group-order").sortable("toArray",{attribute:"data-id"})},this.is_complete=function(){return!!this.get_value()},this.disable=function(){this.enable=!1,t.find(".group-order").sortable("disable")},this.show_anwers=function(n){this.disable();var i=t.find(".group-order");if(1==n.is_correct)i.addClass("ans_right");else{var a=e('<ul class="group-order result"/>');e.each(n.answer,function(t,n){a.append(e('<li class="group-box-order"><div class="answers_content">'+n.content+"</div></li>"))}),i.addClass("ans_wrong"),i.after(a)}}};return n.prototype=QM_Question,new n(t)},QM_Question_Dragmatch=function(t){var n=function(t){var n=this;this.type="drag_match",this.container=t;var i=t.find(".match-question"),a=t.find(".match-answer");({init:function(){this._events(),n.init()},_events:function(){var s=this;i.draggable({containment:t,revert:"invalid",cursor:"move"}),t.find(".match-question-container").droppable({drop:function(t,n){0==e(this).find(".match-question").length?n.draggable.detach().css({top:0,left:0}).appendTo(e(this)):n.draggable.draggable("option","revert",!0)}});var o=function(){var i=a.find(".q"),o=!1;if(n.get_value().length>0){var r={question:t,complete:!1,type:"drag_match"};s.is_complete()&&(r.complete=!0,r.value=s.get_value()),t.trigger("_qm_engine_question_change",r)}i.each(function(){""!=e(this).val()&&0==o&&(o=!0)})};a.each(function(){e(this).droppable({activeClass:"ui-state-hover",hoverClass:"ui-state-active",drop:function(t,n){0==e(this).find(".match-question").length?(n.draggable.detach().css({top:0,left:0}).appendTo(e(this).find(".value")),e(this).find(".q").val(n.draggable.data("value"))):n.draggable.draggable("option","revert",!0),e(this).addClass("ui-state-highlight"),o()},out:function(t,n){n.draggable.data("value")==e(this).find(".q").val()&&e(this).find(".q").val(""),o()}})})},set_value:function(e){},get_value:function(){return a.find(".q").val()},is_complete:function(){return""!=this.get_value()}}).init(),this.get_value=function(){var t=[];return a.each(function(n,i){var a=e(this).find(".q").val();""!=a&&(t[e(this).data("id")]=a)}),t.length==a.length&&t},this.is_complete=function(){return""!=this.get_value()},this.disable=function(){this.enable=!1,i.draggable("disable"),a.droppable("disable")},this.show_anwers=function(n){this.disable();var i=t.find(".group-drag-match");if(1==n.is_correct)i.addClass("ans_right");else{var a=e('<div class="group-drag-match result"><div class="match-answers"></div></div>');e.each(n.answer,function(t,n){a.append(e('<div class="match-answer"><div class="label">'+n.answer+'</div><div class="value"><div class="match-question">'+n.content+"</div></div></div>"))}),i.addClass("ans_wrong"),i.after(a)}}};return n.prototype=QM_Question,new n(t)},QM_Engine_Questions=function(t,n){n=e.extend({total:1},n);var i=[];return{init:function(){this._events()},_events:function(){var e=this;t.on("_qm_engine_question_change",function(n,i){e.is_complete()&&t.trigger("_qm_engine_questions_complete",e.get_complete()),i.complete?i.question.removeClass("s-0").addClass("s-1"):i.question.removeClass("s-1").addClass("s-0")})},get_questions:function(){return i},add_question:function(e){switch(e.data("type")){case"single":i.push(new QM_Question_Single(e));break;case"multiple":i.push(new QM_Question_Multiple(e));break;case"fill_blank":i.push(new QM_Question_Fillblank(e));break;case"order":i.push(new QM_Question_Order(e));break;case"drag_match":i.push(new QM_Question_Dragmatch(e))}},get_result:function(){var t=[];return e.each(i,function(e,n){t.push(n.get_answer())}),t},is_complete:function(){var e=n.total;if(e>0){if(this.get_complete().length==e)return!0}return!1},get_complete:function(){var t=[];return i.length>0&&e.each(i,function(e,n){n.is_complete()&&t.push(n)}),t},show_anwers:function(t){e.each(i,function(n,i){e.each(t,function(e,t){i.get_id()==t.id&&i.show_anwers(t)})})},disable:function(){e.each(i,function(e,t){t.disable()})},on:function(e,t){switch(e){case"complete":this.on_complete(t);break;case"change":this.on_change(t)}},on_complete:function(e){t.on("_qm_engine_questions_complete",function(){e()})},on_change:function(e){t.on("_qm_engine_question_change",function(){e()})}}}});